{"version":3,"sources":["../../../src/drivers/better-sqlite3/index.ts"],"sourcesContent":["// N.b.: importing this module is an entrypoint that imports the better-sqlite3\n// environment dependencies. Specifically the node filesystem.\n\nimport { ElectricConfig } from '../../config/index'\n\nimport {\n  ElectrifyOptions,\n  electrify as baseElectrify,\n} from '../../electric/index'\n\nimport { DbName } from '../../util/types'\n\nimport { DatabaseAdapter } from './adapter'\nimport { Database } from './database'\nimport { ElectricClient } from '../../client/model/client'\nimport { DbSchema } from '../../client/model/schema'\nimport { WebSocketNode } from '../../sockets/node'\n\nexport { DatabaseAdapter }\nexport type { Database }\n\nexport const electrify = async <DB extends DbSchema<any>, T extends Database>(\n  db: T,\n  dbDescription: DB,\n  config: ElectricConfig = {},\n  opts?: ElectrifyOptions\n): Promise<ElectricClient<DB>> => {\n  const dbName: DbName = db.name\n  const adapter = opts?.adapter || new DatabaseAdapter(db)\n  const socketFactory = opts?.socketFactory || WebSocketNode\n\n  const namespace = await baseElectrify(\n    dbName,\n    dbDescription,\n    adapter,\n    socketFactory,\n    config,\n    opts\n  )\n\n  return namespace\n}\n"],"mappings":"AAKA;AAAA,EAEE,aAAa;AAAA,OACR;AAIP,SAAS,uBAAuB;AAIhC,SAAS,qBAAqB;AAKvB,MAAM,YAAY,OACvB,IACA,eACA,SAAyB,CAAC,GAC1B,SACgC;AAChC,QAAM,SAAiB,GAAG;AAC1B,QAAM,UAAU,MAAM,WAAW,IAAI,gBAAgB,EAAE;AACvD,QAAM,gBAAgB,MAAM,iBAAiB;AAE7C,QAAM,YAAY,MAAM;AAAA,IACtB;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF;AAEA,SAAO;AACT;","names":[]}