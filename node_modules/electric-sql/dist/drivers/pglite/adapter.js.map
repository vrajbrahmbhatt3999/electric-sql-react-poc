{"version":3,"sources":["../../../src/drivers/pglite/adapter.ts"],"sourcesContent":["import { Database } from './database'\nimport { Row } from '../../util/types'\nimport { Statement } from '../../util'\nimport { SerialDatabaseAdapter as GenericDatabaseAdapter } from '../generic'\nimport { RunResult } from '../../electric/adapter'\n\nexport class DatabaseAdapter extends GenericDatabaseAdapter {\n  readonly db: Database\n  readonly defaultNamespace = 'public'\n\n  constructor(db: Database) {\n    super()\n    this.db = db\n  }\n\n  async _run(statement: Statement): Promise<RunResult> {\n    const res = await this.db.query(statement.sql, statement.args)\n    return {\n      rowsAffected: res.affectedRows ?? 0,\n    }\n  }\n\n  async _query(statement: Statement): Promise<Row[]> {\n    return (await this.db.query<Row>(statement.sql, statement.args)).rows\n  }\n}\n"],"mappings":"AAGA,SAAS,yBAAyB,8BAA8B;AAGzD,MAAM,wBAAwB,uBAAuB;AAAA,EACjD;AAAA,EACA,mBAAmB;AAAA,EAE5B,YAAY,IAAc;AACxB,UAAM;AACN,SAAK,KAAK;AAAA,EACZ;AAAA,EAEA,MAAM,KAAK,WAA0C;AACnD,UAAM,MAAM,MAAM,KAAK,GAAG,MAAM,UAAU,KAAK,UAAU,IAAI;AAC7D,WAAO;AAAA,MACL,cAAc,IAAI,gBAAgB;AAAA,IACpC;AAAA,EACF;AAAA,EAEA,MAAM,OAAO,WAAsC;AACjD,YAAQ,MAAM,KAAK,GAAG,MAAW,UAAU,KAAK,UAAU,IAAI,GAAG;AAAA,EACnE;AACF;","names":[]}