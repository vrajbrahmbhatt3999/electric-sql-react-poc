"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ExtendedDMMFDatamodel = void 0;
const extendedDMMFEnum_1 = require("./extendedDMMFEnum");
const extendedDMMFModel_1 = require("./extendedDMMFModel");
const schemaParser_1 = require("../utils/schemaParser");
class ExtendedDMMFDatamodel {
    constructor(generatorConfig, datamodel, prismaSchema) {
        Object.defineProperty(this, "generatorConfig", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: generatorConfig
        });
        Object.defineProperty(this, "enums", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "models", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "types", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        this.generatorConfig = generatorConfig;
        this.enums = this._getExtendedEnums(datamodel.enums);
        this.models = this._getExtendedModels(datamodel.models, prismaSchema);
        this.types = this._getExtendedModels(datamodel.types, prismaSchema);
    }
    _getExtendedModels(models, prismaSchema) {
        const parsedModels = (0, schemaParser_1.parseModels)(prismaSchema);
        const modelsDct = new Map(parsedModels.map((m) => [m.name, m]));
        return models.map((model) => new extendedDMMFModel_1.ExtendedDMMFModel(this.generatorConfig, model, modelsDct.get(model.name)));
    }
    _getExtendedEnums(enums) {
        return enums.map((elem) => new extendedDMMFEnum_1.ExtendedDMMFEnum(this.generatorConfig, elem));
    }
}
exports.ExtendedDMMFDatamodel = ExtendedDMMFDatamodel;
//# sourceMappingURL=extendedDMMFDatamodel.js.map