"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.writeScalarType = void 0;
const writeScalarType = (writer, { inputType, isOptional, isNullable, writeComma = true, zodCustomErrors, zodValidatorString, zodCustomValidatorString, writeValidation = true, }) => {
    const zodType = inputType.getZodScalarType();
    if (!zodType)
        return;
    const bigIntSchema = 'z.union([ z.bigint().gte(-9223372036854775808n).lte(9223372036854775807n), z.number().int().gte(Number.MIN_SAFE_INTEGER).lte(Number.MAX_SAFE_INTEGER).transform(BigInt) ])';
    const bigIntArraySchema = 'z.union([ z.bigint().gte(-9223372036854775808n).lte(9223372036854775807n).array(), z.number().int().gte(Number.MIN_SAFE_INTEGER).lte(Number.MAX_SAFE_INTEGER).transform(BigInt).array() ])';
    if (zodCustomValidatorString) {
        if (zodType === 'date') {
            return writer
                .conditionalWrite(inputType.generatorConfig.addInputTypeValidation, zodCustomValidatorString)
                .conditionalWrite(!inputType.generatorConfig.addInputTypeValidation &&
                !inputType.generatorConfig.coerceDate, `z.${zodType}()`)
                .conditionalWrite(!inputType.generatorConfig.addInputTypeValidation &&
                inputType.generatorConfig.coerceDate, `z.coerce.${zodType}()`)
                .conditionalWrite(inputType.isList, `.array()`)
                .conditionalWrite(isOptional, `.optional()`)
                .conditionalWrite(isNullable, `.nullable()`)
                .conditionalWrite(writeComma, `,`);
        }
        if (zodType === 'bigint') {
            return writer
                .conditionalWrite(inputType.generatorConfig.addInputTypeValidation, zodCustomValidatorString)
                .conditionalWrite(inputType.generatorConfig.addInputTypeValidation && inputType.isList, `.array()`)
                .conditionalWrite(!inputType.generatorConfig.addInputTypeValidation &&
                !inputType.isList, bigIntSchema)
                .conditionalWrite(!inputType.generatorConfig.addInputTypeValidation && inputType.isList, bigIntArraySchema)
                .conditionalWrite(isOptional, `.optional()`)
                .conditionalWrite(isNullable, `.nullable()`)
                .conditionalWrite(writeComma, `,`);
        }
        return writer
            .conditionalWrite(inputType.generatorConfig.addInputTypeValidation, zodCustomValidatorString)
            .conditionalWrite(!inputType.generatorConfig.addInputTypeValidation, `z.${zodType}()`)
            .conditionalWrite(inputType.isList, `.array()`)
            .conditionalWrite(isOptional, `.optional()`)
            .conditionalWrite(isNullable, `.nullable()`)
            .conditionalWrite(writeComma, `,`);
    }
    if (zodType === 'date') {
        return writer
            .conditionalWrite(!inputType.generatorConfig.coerceDate, `z.${zodType}(`)
            .conditionalWrite(inputType.generatorConfig.coerceDate, `z.coerce.${zodType}(`)
            .conditionalWrite(writeValidation && !!zodCustomErrors, zodCustomErrors)
            .write(`)`)
            .conditionalWrite(writeValidation && !!zodValidatorString, zodValidatorString)
            .conditionalWrite(inputType.isList, `.array()`)
            .conditionalWrite(isOptional, `.optional()`)
            .conditionalWrite(isNullable, `.nullable()`)
            .conditionalWrite(writeComma, `,`);
    }
    if (zodType === 'bigint') {
        return writer
            .conditionalWrite(!inputType.isList, bigIntSchema)
            .conditionalWrite(inputType.isList, bigIntArraySchema)
            .conditionalWrite(writeValidation && !!zodValidatorString, zodValidatorString)
            .conditionalWrite(isOptional, `.optional()`)
            .conditionalWrite(isNullable, `.nullable()`)
            .conditionalWrite(writeComma, `,`);
    }
    return writer
        .write(`z.${zodType}(`)
        .conditionalWrite(writeValidation && !!zodCustomErrors, zodCustomErrors)
        .write(`)`)
        .conditionalWrite(writeValidation && !!zodValidatorString, zodValidatorString)
        .conditionalWrite(inputType.isList, `.array()`)
        .conditionalWrite(isOptional, `.optional()`)
        .conditionalWrite(isNullable, `.nullable()`)
        .conditionalWrite(writeComma, `,`);
};
exports.writeScalarType = writeScalarType;
//# sourceMappingURL=writeScalarType.js.map